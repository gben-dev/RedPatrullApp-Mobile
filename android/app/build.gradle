plugins {
    id "com.android.application"
    id "kotlin-android"
    // The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.
    id "dev.flutter.flutter-gradle-plugin"
    id "com.google.gms.google-services"
}

android {
    namespace "com.example.app_red_patrulla"
    compileSdkVersion 36
    ndkVersion flutter.ndkVersion

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }

    kotlinOptions { jvmTarget = "17" }

    defaultConfig {
        applicationId "com.example.app_red_patrulla"
        minSdkVersion flutter.minSdkVersion
        // Using targetSdkVersion 34 (current Play requirement) for broader library compatibility
        targetSdkVersion 34
        versionCode flutter.versionCode
        versionName flutter.versionName
        multiDexEnabled true
    }

    buildTypes {
        release {
            signingConfig signingConfigs.debug
            minifyEnabled false
            shrinkResources false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}

flutter { source "../.." }

dependencies {
    // Firebase Bill of Materials (keep centralized versioning)
    implementation platform('com.google.firebase:firebase-bom:33.7.0')
    // Core Firebase SDKs actually used
    implementation 'com.google.firebase:firebase-analytics'
    implementation 'com.google.firebase:firebase-auth'
    implementation 'com.google.firebase:firebase-firestore'
    // (If using storage later for images, uncomment)
    // implementation 'com.google.firebase:firebase-storage'
}
